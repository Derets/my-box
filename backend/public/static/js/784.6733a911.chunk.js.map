{"version":3,"file":"static/js/784.6733a911.chunk.js","mappings":"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","sources":["webpack://my-box/./src/UI/OrderBoxLoader.module.css?1185","UI/OrderBoxLoader.js","webpack://my-box/./src/components/User/UserOrders.module.css?848b","components/User/UserOrders.js","pages/Orders.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"orderCardSceleton\":\"OrderBoxLoader_orderCardSceleton__DP7PL\",\"orderCardSceletonInfo\":\"OrderBoxLoader_orderCardSceletonInfo__LqiH2\",\"orderCardSceletonStatus\":\"OrderBoxLoader_orderCardSceletonStatus__gtuqP\",\"skeleton-loading\":\"OrderBoxLoader_skeleton-loading__hvWpA\",\"orderCardSceletonBasicLine\":\"OrderBoxLoader_orderCardSceletonBasicLine__VkDWw\",\"orderCardSceletonSmallLine\":\"OrderBoxLoader_orderCardSceletonSmallLine__Bo+4i\",\"orderCardSceletonLargeLine\":\"OrderBoxLoader_orderCardSceletonLargeLine__cn8S+\",\"orderCardSceletonDescription\":\"OrderBoxLoader_orderCardSceletonDescription__iO3ur\",\"OBcontentModel\":\"OrderBoxLoader_OBcontentModel__Gp44c\",\"OBcontent\":\"OrderBoxLoader_OBcontent__GDsrG\"};","import React from \"react\";\r\nimport classes from \"./OrderBoxLoader.module.css\";\r\n\r\nconst OrderBoxLoader = () => {\r\n  return (\r\n    <div className={classes.orderCardSceleton}>\r\n      <div className={classes.orderCardSceletonInfo}>\r\n        <div className={classes.orderCardSceletonStatus}></div>\r\n        <div className={classes.orderCardSceletonBasicLine}></div>\r\n        <div className={classes.orderCardSceletonSmallLine}></div>\r\n        <div className={classes.orderCardSceletonLargeLine}></div>\r\n        <div className={classes.orderCardSceletonSmallLine}></div>\r\n      </div>\r\n      <div className={classes.orderCardSceletonDescription}>\r\n        <div className={classes.orderCardSceletonStatus}></div>\r\n        <div className={classes.orderCardSceletonLargeLine}></div>\r\n        <div className={classes.orderCardSceletonBasicLine}></div>\r\n        <div className={classes.orderCardSceletonSmallLine}></div>\r\n        <div className={classes.orderCardSceletonSmallLine}></div>\r\n      </div>\r\n      <div className={classes.OBcontentModel}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderBoxLoader;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"UserOrders_wrapper__5g5fH\",\"UserOrdersSection\":\"UserOrders_UserOrdersSection__j35qM\",\"UserOrders\":\"UserOrders_UserOrders__b5mYI\",\"OrdersTitle\":\"UserOrders_OrdersTitle__I64mH\",\"OrdersDeleteAll\":\"UserOrders_OrdersDeleteAll__oSaCH\",\"orderCardSceleton\":\"UserOrders_orderCardSceleton__09xDf\",\"orderCardSceletonInfo\":\"UserOrders_orderCardSceletonInfo__9fnjO\",\"orderCardSceletonStatus\":\"UserOrders_orderCardSceletonStatus__5eFY-\",\"skeleton-loading\":\"UserOrders_skeleton-loading__knM2y\",\"orderCardSceletonBasicLine\":\"UserOrders_orderCardSceletonBasicLine__7n5eC\",\"orderCardSceletonSmallLine\":\"UserOrders_orderCardSceletonSmallLine__WROg2\",\"orderCardSceletonLargeLine\":\"UserOrders_orderCardSceletonLargeLine__4n5dy\",\"orderCardSceletonDescription\":\"UserOrders_orderCardSceletonDescription__TdpVt\",\"OBcontentModel\":\"UserOrders_OBcontentModel__r4hKU\",\"OBcontent\":\"UserOrders_OBcontent__g3+-o\"};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport OrderedBox from \"./OrderedBox\";\r\nimport { LanguageContext } from \"../../context/LanguageContext\";\r\nimport classes from \"./UserOrders.module.css\";\r\nimport Loader from \"../../UI/Loader\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport Modal from \"../../UI/Modal\";\r\nimport ConfirmModal from \"../../UI/ConfirmModal\";\r\nimport OrderBoxLoader from \"../../UI/OrderBoxLoader\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst UserOrders = () => {\r\n  const [ordersPrice, setOrdersPrice] = useState(0);\r\n  const [ordersData, setOrdersData] = useState(undefined);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [isDeleted, setIsDeleted] = useState(false);\r\n  const [isConfirming, setIsConfirming] = useState(false);\r\n\r\n  const { role } = useContext(AuthContext);\r\n  let isAdmin = role === \"admin\" || role === \"main\";\r\n  let userId =\r\n    (isAdmin && localStorage.getItem(\"user_id_for_orders\")) ||\r\n    localStorage.getItem(\"user_id\");\r\n\r\n  const { token, isLoggedIn } = useContext(AuthContext);\r\n  const { language } = useContext(LanguageContext);\r\n  let isEnglish = language === \"en\";\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const deleteAllOrders = async () => {\r\n    setIsDeleting(false);\r\n    setIsDeleted(false);\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_API_URL}${userId}/orders`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            authorization: \"Bearer \" + token,\r\n          },\r\n        }\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Request failed\");\r\n      }\r\n      const data = await response.json();\r\n      setIsDeleting(false);\r\n      setIsDeleted(true);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setIsDeleting(false);\r\n      setIsDeleted(false);\r\n    }\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    setIsLoading(true);\r\n\r\n    if (userId) {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_API_URL}${userId}/orders`,\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              authorization: \"Bearer \" + token,\r\n            },\r\n          }\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Request failed\");\r\n        }\r\n        const data = await response.json();\r\n        setOrdersData(data);\r\n        const totalPrice = data.orders.reduce(\r\n          (total, order) => total + order.price,\r\n          0\r\n        );\r\n        setOrdersPrice(totalPrice.toFixed(2));\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoggedIn) {\r\n      navigate(\"/authentication\");\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.UserOrdersSection}>\r\n      <div className={classes.wrapper}>\r\n        {isConfirming && (\r\n          <Modal\r\n            onClick={() => {\r\n              setIsConfirming(false);\r\n            }}\r\n          >\r\n            <ConfirmModal\r\n              textEnglish={\"Do you really want to delete all orders!?\"}\r\n              textUkranian={\"Ви насправді хочете видалити всі замовлення!?\"}\r\n              onUnconfirm={() => {\r\n                setIsConfirming(false);\r\n              }}\r\n              onConfirm={() => {\r\n                setIsConfirming(false);\r\n                deleteAllOrders();\r\n              }}\r\n            />\r\n          </Modal>\r\n        )}\r\n        <div className={classes.OrdersTitle}>\r\n          {isEnglish ? \"Orders\" : \"Замовлення\"}\r\n        </div>\r\n\r\n        {!isLoading &&\r\n        (ordersData === undefined || ordersData.orders.length === 0) ? (\r\n          <div className={classes.OrdersTitle}>\r\n            {isEnglish ? \"There are no orders\" : \"Замовлень не знайдено\"}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <button\r\n              className={classes.OrdersDeleteAll}\r\n              disabled={isDeleted}\r\n              onClick={() => {\r\n                setIsConfirming(true);\r\n              }}\r\n            >\r\n              {isDeleting && isEnglish && \"Deleting...\"}\r\n              {isDeleting && !isEnglish && \"Видаляється...\"}\r\n              {!isDeleting && isEnglish && !isDeleted && \"Delete all orders\"}\r\n              {!isDeleting &&\r\n                !isEnglish &&\r\n                !isDeleted &&\r\n                \"Видалити всі замовлення\"}\r\n              {!isDeleting && isEnglish && isDeleted && \"Deleted\"}\r\n              {!isDeleting && !isEnglish && isDeleted && \"Видалено\"}\r\n            </button>\r\n            <p>\r\n              {isEnglish ? \"Total: $\" : \"Всього: $\"}\r\n              {ordersPrice}\r\n            </p>\r\n          </>\r\n        )}\r\n        {!userId && !isLoading && (\r\n          <div className={classes.OrdersTitle}>\r\n            {isEnglish\r\n              ? \"There is no user Id. Please re-log in\"\r\n              : \"Ваш айді не знайдено. Будь ласка, перезайдіть\"}\r\n          </div>\r\n        )}\r\n\r\n        <div className={classes.UserOrders}>\r\n          {ordersData &&\r\n            ordersData.orders &&\r\n            ordersData.orders.map((order, index) => {\r\n              return <OrderedBox key={index} order={order} />;\r\n            })}\r\n          {isLoading && (\r\n            <>\r\n              <OrderBoxLoader />\r\n              <OrderBoxLoader />\r\n              <OrderBoxLoader />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserOrders;\r\n","import React from \"react\";\r\nimport UserOrders from \"../components/User/UserOrders\";\r\n\r\nconst Orders = () => {\r\n  return (\r\n    <>\r\n      <UserOrders />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"names":["_jsxs","className","classes","children","_jsx","_useState","useState","_useState2","_slicedToArray","ordersPrice","setOrdersPrice","_useState3","undefined","_useState4","ordersData","setOrdersData","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","isDeleting","setIsDeleting","_useState9","_useState10","isDeleted","setIsDeleted","_useState11","_useState12","isConfirming","setIsConfirming","role","useContext","AuthContext","userId","localStorage","getItem","_useContext2","token","isLoggedIn","isEnglish","LanguageContext","language","navigate","useNavigate","deleteAllOrders","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","fetch","concat","process","method","headers","authorization","sent","ok","Error","json","t0","console","error","stop","apply","arguments","fetchData","_ref2","_callee2","data","totalPrice","_context2","orders","reduce","total","order","price","toFixed","useEffect","Modal","onClick","ConfirmModal","textEnglish","textUkranian","onUnconfirm","onConfirm","length","_Fragment","disabled","map","index","OrderedBox","OrderBoxLoader","UserOrders"],"sourceRoot":""}