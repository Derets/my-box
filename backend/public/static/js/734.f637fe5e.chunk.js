"use strict";(self.webpackChunkmy_box=self.webpackChunkmy_box||[]).push([[734],{6361:function(e,r,n){n.r(r),n.d(r,{default:function(){return w}});var t=n(2791),o=n(1413),l=n(4165),a=n(5861),s=n(9439),i="OrderForm_wrapper__j7XFz",c="OrderForm_OrderForm__MbhJM",d="OrderForm_FormBlocks__hDzAD",u="OrderForm_FormBlock__-JEZn",m="OrderForm_Error__3rPr0",h="OrderForm_errorMessage__nnPzj",v="OrderForm_formSubmitButton__7UXtL",p="OrderForm_loadingInfo__PmhW9",x=n(1224),j=n(4469),f=n(1134),b=n(5794),g=n(184),y=function(e){var r,n,y,_,N,w=(0,f.cI)({mode:"onBlur"}),Z=w.register,T=w.formState,E=T.errors,O=T.isValid,k=w.handleSubmit,S=w.reset,F=w.setValue,C=(0,t.useState)("649dab637718f5a0035da136"),z=(0,s.Z)(C,2),q=z[0],B=z[1],D=(0,t.useContext)(x.V),I=D.isLoggedIn,L=D.token,P="en"===(0,t.useContext)(b.A).language,R=(0,t.useState)(!1),J=(0,s.Z)(R,2),M=J[0],V=J[1],A=(0,t.useState)(null),W=(0,s.Z)(A,2),X=W[0],$=W[1],G=(0,t.useState)(null),H=(0,s.Z)(G,2),U=H[0],K=H[1],Q=(0,t.useState)(!1),Y=(0,s.Z)(Q,2),ee=Y[0],re=Y[1],ne=(0,t.useState)(null),te=(0,s.Z)(ne,2),oe=te[0],le=te[1],ae=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(){var r,n,t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(!0),!I){e.next=26;break}return B(localStorage.getItem("user_id")),r=localStorage.getItem("user_id"),e.prev=4,e.next=7,fetch("".concat("http://localhost:5000/").concat(r),{method:"GET",headers:{authorization:"Bearer "+L}});case 7:if((n=e.sent).ok){e.next=10;break}throw new Error("Request failed");case 10:return e.next=12,n.json();case 12:t=e.sent,F("name",t.user.name),F("email",t.user.email),F("number",t.user.number),F("city",t.user.city),F("post",t.user.post),re(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),console.error(e.t0),le(e.t0.message||"Something went wrong, please try again  "),re(!1);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){I&&ae()}),[]);var se=function(){var r=(0,a.Z)((0,l.Z)().mark((function r(n){var t,o;return(0,l.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={typeOfBox:e.boxType||"CubeBox",size:{length:e.length,width:e.width,height:e.height},colors:{colorOne:e.colorOne,colorTwo:e.colorTwo,colorThree:e.colorThree},address:{email:n.email,telNumber:n.number,city:n.city,postDepartment:n.post},creator:q,amount:e.amount,price:e.price,comment:n.comment},r.prev=1,V(!0),K(null),r.next=6,fetch("".concat("http://localhost:5000/","ordering"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 6:if((o=r.sent).ok){r.next=9;break}throw new Error("Request failed");case 9:return r.next=11,o.json();case 11:r.sent,S(),V(!1),K(!0),r.next=23;break;case 17:r.prev=17,r.t0=r.catch(1),console.error(r.t0),$(r.t0.message||"Something went wrong, please try again  "),V(!1),K(!1);case 23:case"end":return r.stop()}}),r,null,[[1,17]])})));return function(e){return r.apply(this,arguments)}}();return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("form",{onSubmit:k(se),className:c,children:(0,g.jsxs)("div",{className:i,children:[ee&&I&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(j.Z,{}),(0,g.jsx)("div",{className:p,children:P?"Loading data from your profile...":"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u0437 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e..."})]}),!ee&&!oe&&I&&(0,g.jsx)("div",{className:p,children:P?"Data from your profile was fetched successfully":"\u0414\u0430\u043d\u0456 \u0437 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e \u0431\u0443\u043b\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456 \u0443\u0441\u043f\u0456\u0448\u043d\u043e"}),!ee&&oe&&I&&(0,g.jsx)("div",{className:p,children:P?"The autofill information from your profile was not loaded (Reason: ".concat(oe,")"):"\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f \u0437 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e \u043d\u0435 \u0431\u0443\u043b\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0430 (\u041f\u0440\u0438\u0447\u0438\u043d\u0430: ".concat(oe,")")}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsxs)("div",{className:u,children:[(0,g.jsx)("h2",{children:"Contact Information"}),(0,g.jsxs)("label",{className:"".concat(null!==E&&void 0!==E&&E.name?m:null),children:[P?"Name":"\u0406\u043c`\u044f",(0,g.jsx)("br",{}),(0,g.jsx)("input",(0,o.Z)({placeholder:P?"Enter you name":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c`\u044f",type:"text"},Z("name",{required:"".concat(P?"This field must not be empty!":"\u0426\u0435 \u043f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u043e \u0431\u0443\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c!"),minLength:{value:1}}))),(0,g.jsx)("div",{className:h,children:(null===E||void 0===E?void 0:E.name)&&(0,g.jsx)("p",{children:(null===E||void 0===E||null===(r=E.name)||void 0===r?void 0:r.message)||"".concat(P?"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430")})})]}),(0,g.jsxs)("label",{className:"".concat(null!==E&&void 0!==E&&E.email?m:null),children:["Email",(0,g.jsx)("br",{}),(0,g.jsx)("input",(0,o.Z)({placeholder:P?"Enter email":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c email",type:"email"},Z("email",{required:"".concat(P?"Enter valid email!":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0438\u0439 email!"),pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/}))),(0,g.jsx)("div",{className:h,children:(null===E||void 0===E?void 0:E.email)&&(0,g.jsx)("p",{children:(null===E||void 0===E||null===(n=E.email)||void 0===n?void 0:n.message)||"".concat(P?"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430")})})]}),(0,g.jsxs)("label",{className:"".concat(null!==E&&void 0!==E&&E.number?m:null),children:[P?"Number":"\u041d\u043e\u043c\u0435\u0440",(0,g.jsx)("br",{}),(0,g.jsx)("input",(0,o.Z)({placeholder:P?"Enter phone number":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443",type:"text"},Z("number",{required:"".concat(P?"Enter valid phone number!":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443!"),pattern:/^\+(?:[0-9] ?){6,14}[0-9]$/}))),(0,g.jsx)("div",{className:h,children:(null===E||void 0===E?void 0:E.number)&&(0,g.jsx)("p",{children:(null===E||void 0===E||null===(y=E.number)||void 0===y?void 0:y.message)||"".concat(P?"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430")})})]})]}),(0,g.jsxs)("div",{className:u,children:[(0,g.jsx)("h2",{children:P?"Postal Details":"\u041f\u043e\u0448\u0442\u043e\u0432\u0456 \u0434\u0430\u043d\u0456"}),(0,g.jsxs)("label",{className:"".concat(null!==E&&void 0!==E&&E.post?m:null),children:[P?"Post Department":"\u041f\u043e\u0448\u0442\u043e\u0432\u0435 \u0432\u0456\u0434\u0456\u043b\u0435\u043d\u043d\u044f",(0,g.jsx)("br",{}),(0,g.jsx)("input",(0,o.Z)({placeholder:P?"Enter your post department":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u043e\u0448\u0442\u043e\u0432\u0435 \u0432\u0456\u0434\u0456\u043b\u0435\u043d\u043d\u044f",type:"text"},Z("post",{required:"".concat(P?"This field must not be empty!":"\u0426\u0435 \u043f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u043e \u0431\u0443\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c!"),minLength:{value:1}}))),(0,g.jsx)("div",{className:h,children:(null===E||void 0===E?void 0:E.post)&&(0,g.jsx)("p",{children:(null===E||void 0===E||null===(_=E.post)||void 0===_?void 0:_.message)||"".concat(P?"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430")})})]}),(0,g.jsxs)("label",{className:"".concat(null!==E&&void 0!==E&&E.city?m:null),children:[P?"City Name":"\u041d\u0430\u0437\u0432\u0430 \u043c\u0456\u0441\u0442\u0430",(0,g.jsx)("br",{}),(0,g.jsx)("input",(0,o.Z)({placeholder:P?"Enter name of your city":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u0456\u0441\u0442\u0430",type:"text"},Z("city",{required:"".concat(P?"This field must not be empty!":"\u0426\u0435 \u043f\u043e\u043b\u0435 \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u043d\u043e \u0431\u0443\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c!"),minLength:{value:1}}))),(0,g.jsx)("div",{className:h,children:(null===E||void 0===E?void 0:E.city)&&(0,g.jsx)("p",{children:(null===E||void 0===E||null===(N=E.city)||void 0===N?void 0:N.message)||"".concat(P?"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430")})})]})]}),(0,g.jsxs)("div",{className:u,children:[(0,g.jsx)("h2",{children:P?"Comment":"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456\u0439"}),(0,g.jsxs)("label",{children:[(0,g.jsx)("br",{}),(0,g.jsx)("textarea",(0,o.Z)({placeholder:P?"Write your comment":"\u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u0432\u0430\u0448 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456\u0439",type:"text"},Z("comment")))]})]}),(0,g.jsx)("div",{className:v,children:(0,g.jsx)("button",{type:"submit",disabled:!O,children:P?"Create Order":"\u0417\u0430\u043c\u043e\u0432\u0438\u0442\u0438"})}),M&&(0,g.jsx)(j.Z,{light:!0}),M&&(0,g.jsx)("div",{className:p,children:P?"Creating Order...":"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f..."}),!M&&X&&(0,g.jsx)("div",{className:p,children:P?"The order was not created (Reason: ".concat(X,")"):"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0431\u0443\u043b\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e (\u041f\u0440\u0438\u0447\u0438\u043d\u0430: ".concat(X,")")}),!M&&!X&&U&&(0,g.jsx)("div",{className:p,children:P?"The order was created successfully":"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0431\u0443\u043b\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u0443\u0441\u043f\u0456\u0448\u043d\u043e"})]})]})})})},_=n(8634),N=n(7689),w=function(){var e=(0,N.TH)(),r=null===e||void 0===e?void 0:e.state;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_.Z,{order:r,isOrdering:!0}),(0,g.jsx)(y,{colorOne:null===r||void 0===r?void 0:r.colorOne,colorTwo:null===r||void 0===r?void 0:r.colorTwo,colorThree:null===r||void 0===r?void 0:r.colorThree,width:null===r||void 0===r?void 0:r.width,height:null===r||void 0===r?void 0:r.height,length:null===r||void 0===r?void 0:r.length,boxType:null===r||void 0===r?void 0:r.boxType,amount:null===r||void 0===r?void 0:r.amount,price:null===r||void 0===r?void 0:r.price})]})}}}]);
//# sourceMappingURL=734.f637fe5e.chunk.js.map